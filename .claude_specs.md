# Claude Specs for pnl-mcp-server

**Project**: pnl-mcp-server (Profit and Loss Model Context Protocol Server)
**Purpose**: Analyze Endur P&L reports from Excel, CSV, or SQLite data sources
**Version**: 0.1.0
**Date**: June 30, 2025

## Key Features
- Data-type agnostic (Excel, CSV, SQLite)
- Tools: preview_data, analyze_data, load_data
- FastMCP server with stdio and SSE transports
- Environment variables: DATA_FILES_PATH, FASTMCP_PORT
- Advanced P&L analysis capabilities
- Safe Python code execution for data wrangling

## Transport Modes
- **Stdio**: For local integration with AI tools like Cursor Desktop
- **SSE**: For remote connections via HTTP endpoints

## Tools Overview
1. **preview_data**: Quick data structure preview (columns, shape, sample rows)
2. **analyze_data**: Execute Python data wrangling scripts with safe evaluation
3. **load_data**: Load and validate data from various sources

## Environment Variables
- `DATA_FILES_PATH`: Directory for data files in SSE mode (default: ./data_files)
- `FASTMCP_PORT`: Server port for SSE mode (default: 8000)

## Security
- Restricted eval environment for analysis_code execution
- Safe builtins only (no file operations, imports, etc.)
- Automatic empty column removal
- Path validation and sanitization